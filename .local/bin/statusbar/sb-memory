#!/bin/sh

case $BLOCK_BUTTON in
    1) notify-send "ğŸ Memory hogs" "$(
        ps axch -o cmd:15,%mem --sort=-%mem | head
        echo
        free --mebi | sed -n '2{p;q}' | awk '{printf ("ğŸ‘Ÿ%2.2fGB/%2.2fGB\n", ( $3 / 1024), ($2 / 1024))}'
    )" ;;
    2) setsid -f "$TERMINAL" -e htop ;;
    3) notify-send "ğŸ Memory module" "\- Shows Memory used/total
- Left click to show memory hogs
- Middle click to open htop" ;;
    6) setsid -f "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

[ $(free --mebi | sed -n '2{p;q}' | awk '{print $2}') -gt 32768 ] && free --mebi | sed -n '2{p;q}' | awk '{printf ("ğŸ%2.2f%%\n", ( $3 / $2) * 100)}' ||
    free --mebi | sed -n '2{p;q}' | awk '{printf ("%dgb/%dgb", $3/1000+0.5,$2/1000+0.5)}'
