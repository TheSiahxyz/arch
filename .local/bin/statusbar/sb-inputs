#!/bin/sh

keyboard="‚å®Ô∏è"

get_input_method() {
	state=$(fcitx5-remote)
	current_im=$(fcitx5-remote -n)
	name=""

	if [ "$state" -eq 2 ]; then
		name="KO"
		case "$current_im" in
		*ko* | *Korean* | *hangul*) echo "$keyboard$name" ;;
		*) echo "üåê" ;;
		esac
	else
		name="US"
		echo "$keyboard$name"
	fi
	pkill -RTMIN+29 "${STATUSBAR:-dwmblocks}"
}

case $BLOCK_BUTTON in
1) setsid -w -f "$TERMINAL" -e fcitx5-configtool ;;
2) fcitx5-remote -t ;;
3) notify-send "‚å®Ô∏è Input Method module" "\- Shows current input method (defalt US)
- Left click to open fcitx5 configuration
- Middle click to switch input method" ;;
6) setsid -f "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

get_input_method
